
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/login2.css">
   
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/limontesweetalert2/7.2.0/sweetalert2.min.css/>">
    <link href="
https://cdn.jsdelivr.net/npm/sweetalert2@11.7.9/dist/sweetalert2.min.css
" rel="stylesheet">
    <script src="https://kit.fontawesome.com/b356ad9dc8.js" crossorigin="anonymous"></script>
    <title>Login</title>
</head>
<body>
    
    
 <div class="container">
    <div class="bg-img">
        <img src="../images/login.jpg">
    </div>
    <div class="box">
        <div class="switch">
            <a href="#" class="login" onclick="login()">Login</a>
            <a href="#" class="register" onclick="register()">Register</a>
            <div class="btn-active" id="btn"></div>
        </div>
        
        <div class="box-login" id="login">           
            <div class="top-header">
               <a href="index.html"> <img src="../images/logo1.png" alt=""></a>
            </div>
            <div class="input-group">
                <div class="input-field">
                    <input type="text" class="input-box" id="log-email" required>
                    <label for="Email">Email address</label>
                </div>
                <div class="input-field">
                    <input type="password" class="input-box" id="log-password" required>
                    <label for="logPassword">Password</label>
                     <div class="eye-area">
                        <div class="eye-box" onclick="logPassword()">
                            <i class="fa-regular fa-eye" id="eye"></i>
                            <i class="fa-regular fa-eye-slash" id="eye-slash"></i>
                        </div>
                     </div>
                </div>
                <div class="forgot">
                  <label for="remember"><input type="checkbox" id="formCheck" class="check">Remember</label>
                  <span><a href="#">Forgot password?</a></span>
                </div>
                
                <div class="input-field">
                    <input type="submit" class="input-submit" value="Sign In" id="signIn">
                </div>
                <div class="input-field">
                    <center><small>Or</small></center>
                    <button class="input-submit btn" id="googleSignUp">
                        <img src="../images/google.png" >
                        <span>Continue with Google</span>
                    </button>
                </div>
                
            </div>

        </div>
 
     <div class="box-register" id="register" >

        <div class="top-header">
          <a href="index.html"> <img src="../images/logo1.png" alt=""></a>
            
        </div>
        <div class="input-group">
            <div class="input-field">
                <input type="text" class="input-box" id="reg-name" required>
                <label for="regUser">Fullname</label>
            </div>
            <div class="input-field">
                <input type="text" class="input-box" id="reg-email" required>
                <label for="Email">Email address</label>
            </div>
            <div class="input-field">
                <input type="password" class="input-box" id="reg-password" required>
                <label for="regPassword">Password</label>
                <div class="eye-area">
                    <div class="eye-box" onclick="regPassword()">
                        <i class="fa-regular fa-eye" id="eye2"></i>
                        <i class="fa-regular fa-eye-slash" id="eye-slash2"></i>
                    </div>
                 </div>
            </div>
            
            
            <div class="input-field">
                <input type="submit" class="input-submit" value="Sign Up" id="signUp" onclick="signUp()">
            </div>

            <div class="input-field">
                <center><small>Or</small></center>
                <button class="input-submit btn" id="googleSignUp">
                    <img src="../images/google.png" >
                    <span>Continue with Google</span>
                </button>
            </div>
            <div class="agree">
                <center><small>By registering, you agree Housemate's Terms of Service </small></center>
            </div>
            
        </div>

    </div>

    </div>
 </div>

 <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>


<script>



    var x = document.getElementById('login');
    var y = document.getElementById('register');
    var z = document.getElementById('btn');

    function login(){
       x.style.left = "27px";
       y.style.right = "-350px";
       z.style.left = "0px";
    }
    function register(){
       x.style.left = "-350px";
       y.style.right = "25px";
       z.style.left = "150px";
    }

    function logPassword(){

       var a = document.getElementById('log-password');
       var c = document.getElementById('eye');
       var b = document.getElementById('eye-slash');
       
       if(a.type === "password"){
          a.type = "text"
          b.style.opacity = "0";
          c.style.opacity = "1";
       
       }else{    
          a.type = "password"
          b.style.opacity = "1";
          c.style.opacity = "0";
       
       }
       
       }

       function regPassword(){

           var d = document.getElementById('reg-password');
           var f = document.getElementById("eye2");
           var e = document.getElementById("eye-slash2");
           
           if(d.type === "password"){
           d.type = "text"
           e.style.opacity = "0";
           f.style.opacity = "1";
           
           }else{    
           d.type = "password"
           e.style.opacity = "1";
           f.style.opacity = "0";
           
           }
           
           }
</script>
<script type="module">


   import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js";
   import { getDatabase, set, ref, update } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-database.js";
   import { 
       getAuth, 
       createUserWithEmailAndPassword, 
       signInWithEmailAndPassword, 
       signOut, 
       GoogleAuthProvider,
       signInWithRedirect,
       getRedirectResult,
       signInWithPopup} from "https://www.gstatic.com/firebasejs/9.22.1/firebase-auth.js";
 
   const firebaseConfig = {
     apiKey: "AIzaSyBszXbHOC-79Lv9rB6tQve0DwyF7SAaMoM",
     authDomain: "housemate-6a14c.firebaseapp.com",
     databaseURL: "https://housemate-6a14c-default-rtdb.firebaseio.com",
     projectId: "housemate-6a14c",
     storageBucket: "housemate-6a14c.appspot.com",
     messagingSenderId: "859438127955",
     appId: "1:859438127955:web:d59e0aa54e1517f1685fa6"
   };

   const app = initializeApp(firebaseConfig);
   const database = getDatabase(app);
   const provider = new GoogleAuthProvider(app);
   const auth = getAuth(app);
 
   signUp.addEventListener(`click`, (e)=>{
       var email = document.getElementById('reg-email').value ;
       var password = document.getElementById('reg-password').value;
       var fullname = document.getElementById('reg-name').value   ;
       
       createUserWithEmailAndPassword(auth, email, password)
       .then((userCredential) => {
       const user = userCredential.user;
       set(ref(database, 'users_login/' + user.uid),{
           fullname : fullname,
           email : email
       })
       swal("", "created successfully", "success");
       window.location.assign("./login.html");
      
       })
       .catch((error) => {
           const errorCode = error.code;
           const errorMessage = error.message;
           swal("", errorMessage, "error");
         });
       })

   signIn.addEventListener(`click`, (e)=>{
       var email = document.getElementById('log-email').value ;
       var password = document.getElementById('log-password').value;
       signInWithEmailAndPassword(auth, email, password)
       .then((userCredential) => {
           const user = userCredential.user;
           const date = new Date();
           update(ref(database, 'users_login/' + user.uid),{
               lastedtime_login : date
           })
           window.location.assign("index.html");
           
       })
       .catch((error) => {
           const errorCode = error.code;
           const errorMessage = error.message;
           swal("", errorMessage, "error");
       });
   })

   
     document.querySelector('#googleSignUp').addEventListener('click', (e) => { 
     
      
       signInWithPopup(auth, provider);
       getRedirectResult(auth)
           .then((result) => {
               const credential = GoogleAuthProvider.credentialFromResult(result);
               const token = credential.accessToken;
               const user = result.user;
               alert(user.displayName);
          
           }).catch((error) => {
         
               const errorCode = error.code;
               const errorMessage = error.message;
               const email = error.customData.email;
               const credential = GoogleAuthProvider.credentialFromError(error);
               alert(errorMessage);
           });
     
       })

       


     

   </script>

</body>
</html>
<!-- googleSignUp.addEventListener(`click`, (e)=>{ -->
    <!-- const user = auth.currentUser;
   signOut(auth).then(() => {
       alert('log out successful')
     }).catch((error) => {
       const errorCode = error.code;
       const errorMessage = error.message;
       alert(errorMessage);
     });   -->